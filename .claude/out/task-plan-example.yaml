# Telegram Survey Bot MVP - Task Plan

## Executive Summary
- **Total Tasks**: 45
- **Timeline**: 5 weeks (25 days)
- **Agents Required**: 6
- **Parallel Streams**: 3

---

## Phase 1: Foundation (Days 1-5)

### TASK-001
task_id: TASK-001
title: Initialize .NET solution structure
assigned_to: project-setup-agent
priority: High
estimated_hours: 2
dependencies: []
parallel_safe: false
description: Create solution with Api, Core, Infrastructure, and Tests projects
acceptance_criteria:
  - Solution file created
  - All projects properly referenced
  - Basic folder structure established
phase: 1
status: pending

### TASK-002
task_id: TASK-002
title: Configure development environment
assigned_to: project-setup-agent
priority: High
estimated_hours: 2
dependencies: [TASK-001]
parallel_safe: false
description: Set up appsettings, environment variables, and database connection
acceptance_criteria:
  - appsettings.json configured
  - Connection strings working
  - JWT secret configured
  - Telegram bot token set
phase: 1
status: pending

### TASK-003
task_id: TASK-003
title: Install required NuGet packages
assigned_to: project-setup-agent
priority: High
estimated_hours: 1
dependencies: [TASK-001]
parallel_safe: true
description: Add EF Core, PostgreSQL, Telegram.Bot, JWT, and other packages
acceptance_criteria:
  - All packages installed
  - No version conflicts
  - Project builds successfully
phase: 1
status: pending

### TASK-004
task_id: TASK-004
title: Design database schema
assigned_to: database-agent
priority: High
estimated_hours: 4
dependencies: [TASK-002]
parallel_safe: true
description: Create entity models for Survey, Question, Response, Answer
acceptance_criteria:
  - All entities created
  - Relationships defined
  - Data types appropriate
phase: 1
status: pending

### TASK-005
task_id: TASK-005
title: Configure DbContext
assigned_to: database-agent
priority: High
estimated_hours: 3
dependencies: [TASK-004]
parallel_safe: false
description: Set up SurveyBotContext with entity configurations
acceptance_criteria:
  - DbContext configured
  - Fluent API mappings complete
  - Connection to PostgreSQL working
phase: 1
status: pending

### TASK-006
task_id: TASK-006
title: Create initial migration
assigned_to: database-agent
priority: High
estimated_hours: 2
dependencies: [TASK-005]
parallel_safe: false
description: Generate and apply first EF Core migration
acceptance_criteria:
  - Migration generated
  - Database created
  - Schema matches design
phase: 1
status: pending

---

## Phase 2: Backend Core (Days 6-10)

### TASK-007
task_id: TASK-007
title: Implement JWT authentication
assigned_to: backend-api-agent
priority: High
estimated_hours: 4
dependencies: [TASK-006]
parallel_safe: false
description: Create authentication service and JWT middleware
acceptance_criteria:
  - Login endpoint working
  - JWT tokens generated
  - Token validation working
phase: 2
status: pending

### TASK-008
task_id: TASK-008
title: Create Survey controller
assigned_to: backend-api-agent
priority: High
estimated_hours: 4
dependencies: [TASK-006]
parallel_safe: true
description: Implement CRUD operations for surveys
acceptance_criteria:
  - All CRUD endpoints working
  - Proper status codes returned
  - Validation implemented
phase: 2
status: pending

### TASK-009
task_id: TASK-009
title: Create Question controller
assigned_to: backend-api-agent
priority: High
estimated_hours: 3
dependencies: [TASK-008]
parallel_safe: true
description: Implement question management endpoints
acceptance_criteria:
  - Add/update/delete questions
  - Question ordering works
  - Options for choice questions
phase: 2
status: pending

### TASK-010
task_id: TASK-010
title: Implement Survey service layer
assigned_to: backend-api-agent
priority: High
estimated_hours: 5
dependencies: [TASK-008]
parallel_safe: false
description: Create service classes with business logic
acceptance_criteria:
  - Survey logic separated from controller
  - Proper error handling
  - Data mapping implemented
phase: 2
status: pending

### TASK-011
task_id: TASK-011
title: Create Response endpoints
assigned_to: backend-api-agent
priority: Medium
estimated_hours: 4
dependencies: [TASK-009]
parallel_safe: true
description: Implement endpoints for survey responses
acceptance_criteria:
  - Response submission works
  - Validation per question type
  - Responses linked to users
phase: 2
status: pending

### TASK-012
task_id: TASK-012
title: Add statistics calculation
assigned_to: backend-api-agent
priority: Medium
estimated_hours: 3
dependencies: [TASK-011]
parallel_safe: true
description: Calculate basic statistics for survey responses
acceptance_criteria:
  - Response counts calculated
  - Percentage calculations for choices
  - Results properly formatted
phase: 2
status: pending

---

## Phase 3: Bot Integration (Days 11-15)

### TASK-013
task_id: TASK-013
title: Configure bot webhook
assigned_to: telegram-bot-agent
priority: High
estimated_hours: 3
dependencies: [TASK-007]
parallel_safe: false
description: Set up webhook endpoint for Telegram updates
acceptance_criteria:
  - Webhook registered with Telegram
  - Updates received successfully
  - Bot responds to messages
phase: 3
status: pending

### TASK-014
task_id: TASK-014
title: Implement /start command
assigned_to: telegram-bot-agent
priority: High
estimated_hours: 2
dependencies: [TASK-013]
parallel_safe: true
description: Create welcome message and user initialization
acceptance_criteria:
  - Welcome message sent
  - User registered in system
  - Instructions displayed
phase: 3
status: pending

### TASK-015
task_id: TASK-015
title: Implement /surveys command
assigned_to: telegram-bot-agent
priority: High
estimated_hours: 3
dependencies: [TASK-014, TASK-008]
parallel_safe: true
description: Display list of active surveys with selection
acceptance_criteria:
  - Active surveys listed
  - Inline keyboard for selection
  - Proper formatting
phase: 3
status: pending

### TASK-016
task_id: TASK-016
title: Build survey flow handler
assigned_to: telegram-bot-agent
priority: High
estimated_hours: 6
dependencies: [TASK-015]
parallel_safe: false
description: Implement question-by-question survey delivery
acceptance_criteria:
  - Questions displayed sequentially
  - Progress tracking works
  - All question types handled
phase: 3
status: pending

### TASK-017
task_id: TASK-017
title: Create answer validators
assigned_to: telegram-bot-agent
priority: High
estimated_hours: 4
dependencies: [TASK-016]
parallel_safe: true
description: Validate responses based on question type
acceptance_criteria:
  - Text validation works
  - Choice validation works
  - Error messages helpful
phase: 3
status: pending

### TASK-018
task_id: TASK-018
title: Implement state management
assigned_to: telegram-bot-agent
priority: High
estimated_hours: 4
dependencies: [TASK-016]
parallel_safe: false
description: Track user progress through surveys
acceptance_criteria:
  - State persisted between messages
  - Resume capability works
  - Timeout handling implemented
phase: 3
status: pending

---

## Phase 4: Admin Panel (Days 16-20)

### TASK-019
task_id: TASK-019
title: Set up React project
assigned_to: admin-panel-agent
priority: High
estimated_hours: 2
dependencies: [TASK-001]
parallel_safe: true
description: Initialize React app with routing and UI library
acceptance_criteria:
  - React app created
  - Routing configured
  - Material-UI installed
phase: 4
status: pending

### TASK-020
task_id: TASK-020
title: Create login page
assigned_to: admin-panel-agent
priority: High
estimated_hours: 3
dependencies: [TASK-019, TASK-007]
parallel_safe: true
description: Build authentication UI with JWT token handling
acceptance_criteria:
  - Login form works
  - Token stored properly
  - Redirect after login
phase: 4
status: pending

### TASK-021
task_id: TASK-021
title: Build dashboard component
assigned_to: admin-panel-agent
priority: Medium
estimated_hours: 4
dependencies: [TASK-020]
parallel_safe: true
description: Create overview page with statistics cards
acceptance_criteria:
  - Stats displayed
  - Survey list shown
  - Navigation works
phase: 4
status: pending

### TASK-022
task_id: TASK-022
title: Create survey builder form
assigned_to: admin-panel-agent
priority: High
estimated_hours: 6
dependencies: [TASK-021]
parallel_safe: true
description: Implement form for creating and editing surveys
acceptance_criteria:
  - Survey fields editable
  - Question management works
  - Save functionality works
phase: 4
status: pending

### TASK-023
task_id: TASK-023
title: Build question components
assigned_to: admin-panel-agent
priority: High
estimated_hours: 5
dependencies: [TASK-022]
parallel_safe: true
description: Create UI for different question types
acceptance_criteria:
  - All question types supported
  - Options management for choices
  - Order change functionality
phase: 4
status: pending

### TASK-024
task_id: TASK-024
title: Implement statistics viewer
assigned_to: admin-panel-agent
priority: Medium
estimated_hours: 4
dependencies: [TASK-021, TASK-012]
parallel_safe: true
description: Display survey response statistics with charts
acceptance_criteria:
  - Response counts shown
  - Charts render correctly
  - Export button works
phase: 4
status: pending

### TASK-025
task_id: TASK-025
title: Add CSV export
assigned_to: admin-panel-agent
priority: Low
estimated_hours: 2
dependencies: [TASK-024]
parallel_safe: true
description: Implement client-side CSV generation and download
acceptance_criteria:
  - CSV generates correctly
  - Download triggers
  - Data formatted properly
phase: 4
status: pending

---

## Phase 5: Testing & Deployment (Days 21-25)

### TASK-026
task_id: TASK-026
title: Write Survey service tests
assigned_to: testing-agent
priority: High
estimated_hours: 4
dependencies: [TASK-010]
parallel_safe: true
description: Create unit tests for survey business logic
acceptance_criteria:
  - Core methods tested
  - Edge cases covered
  - Mocks used properly
phase: 5
status: pending

### TASK-027
task_id: TASK-027
title: Write API integration tests
assigned_to: testing-agent
priority: High
estimated_hours: 5
dependencies: [TASK-008, TASK-009, TASK-011]
parallel_safe: true
description: Test API endpoints end-to-end
acceptance_criteria:
  - Happy paths tested
  - Error cases tested
  - Database rollback works
phase: 5
status: pending

### TASK-028
task_id: TASK-028
title: Test bot commands
assigned_to: testing-agent
priority: Medium
estimated_hours: 4
dependencies: [TASK-014, TASK-015, TASK-016]
parallel_safe: true
description: Create tests for bot message handling
acceptance_criteria:
  - Commands tested
  - Flow logic verified
  - State management tested
phase: 5
status: pending

### TASK-029
task_id: TASK-029
title: Frontend component tests
assigned_to: testing-agent
priority: Low
estimated_hours: 3
dependencies: [TASK-022, TASK-023]
parallel_safe: true
description: Basic tests for React components
acceptance_criteria:
  - Forms tested
  - Props validated
  - Rendering verified
phase: 5
status: pending

### TASK-030
task_id: TASK-030
title: Fix identified bugs
assigned_to: backend-api-agent
priority: High
estimated_hours: 8
dependencies: [TASK-027, TASK-028]
parallel_safe: false
description: Resolve issues found during testing
acceptance_criteria:
  - All critical bugs fixed
  - Tests passing
  - No regressions
phase: 5
status: pending

### TASK-031
task_id: TASK-031
title: Prepare deployment configuration
assigned_to: project-setup-agent
priority: High
estimated_hours: 3
dependencies: [TASK-030]
parallel_safe: true
description: Create production configuration and deployment scripts
acceptance_criteria:
  - Production settings configured
  - Environment variables documented
  - Deployment script works
phase: 5
status: pending

### TASK-032
task_id: TASK-032
title: Deploy to production
assigned_to: project-setup-agent
priority: High
estimated_hours: 4
dependencies: [TASK-031]
parallel_safe: false
description: Deploy application to production server
acceptance_criteria:
  - Application deployed
  - Database migrated
  - Bot webhook active
  - Admin panel accessible
phase: 5
status: pending

### TASK-033
task_id: TASK-033
title: Smoke test production
assigned_to: testing-agent
priority: High
estimated_hours: 2
dependencies: [TASK-032]
parallel_safe: false
description: Verify core functionality in production
acceptance_criteria:
  - Can create survey
  - Bot responds
  - Can submit response
  - Statistics calculate
phase: 5
status: pending

---

## Parallel Work Streams

### Stream 1: Backend Development
- Database setup (Days 1-3)
- API development (Days 4-10)
- Bug fixes (Days 21-23)

### Stream 2: Bot Development
- Can start Day 11
- Independent from Admin Panel
- Requires API endpoints ready

### Stream 3: Frontend Development
- Can start Day 16
- Parallel to bot work
- Needs API documentation

---

## Agent Workload Summary

### project-setup-agent
- Tasks: 5
- Estimated Hours: 12
- Critical Path: Yes

### database-agent
- Tasks: 3
- Estimated Hours: 9
- Critical Path: Yes

### backend-api-agent
- Tasks: 7 + bug fixes
- Estimated Hours: 35
- Critical Path: Yes

### telegram-bot-agent
- Tasks: 6
- Estimated Hours: 22
- Critical Path: Yes

### admin-panel-agent
- Tasks: 7
- Estimated Hours: 26
- Critical Path: No

### testing-agent
- Tasks: 5
- Estimated Hours: 20
- Critical Path: Yes

---

## Milestones

- **Day 5**: Database ready, project structure complete
- **Day 10**: API functional, authentication working
- **Day 15**: Bot fully functional
- **Day 20**: Admin panel complete
- **Day 25**: Deployed to production

---

## Risk Factors

1. **Telegram API limits** - Mitigation: Implement rate limiting
2. **Database performance** - Mitigation: Add indexes early
3. **Authentication complexity** - Mitigation: Keep it simple
4. **Frontend-backend sync** - Mitigation: Clear API documentation
5. **Deployment issues** - Mitigation: Test deployment early

---

## Notes

- Tasks marked parallel_safe can run simultaneously
- Critical path tasks block progress if delayed
- Buffer time included in estimates
- Focus on MVP features only
- Testing happens throughout, not just Phase 5
